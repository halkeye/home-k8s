# yaml-language-server: $schema=https://raw.githubusercontent.com/bjw-s-labs/helm-charts/main/charts/library/common/values.schema.json
controllers:
  main:
    replicas: 1
    annotations:
      reloader.stakater.com/auto: "true"
    containers:
      trmnl:
        image:
          repository: ghcr.io/usetrmnl/byos_laravel
          tag: 0.6.2
        env:
          APP_KEY: 
          PHP_OPCACHE_ENABLE: 1
          TRMNL_PROXY_REFRESH_MINUTES: 15
          FORCE_HTTPS: 1
          DB_DATABASE: database/storage/database.sqlite
        envFrom:
          - secretRef:
              name: "trmnl-secret"
service:
  main:
    controller: main
    ports:
      http:
        port: 8080
ingress:
  main:
    enabled: true
    hosts:
      - host: "trmnl.g4v.dev"
        paths:
          - path: /
            service:
              identifier: main
              port: http
persistence:
  tmp:
    enabled: true
    type: emptyDir
  database:
    enabled: true
    suffix: database
    type: persistentVolumeClaim
    accessMode: ReadWriteOnce
    size: 1Gi
    globalMounts:
      - path: /var/www/html/database/storage
  storage:
    enabled: true
    type: emptyDir
    globalMounts:
      - path: /var/www/html/storage/app/public/images/generated
