# yaml-language-server: $schema=../app-template.schema.json
app-template:
  controllers:
    main:
      annotations:
        reloader.stakater.com/auto: "true"
      containers:
        starbase-80:
          image:
            repository: jordanroher/starbase-80
            tag: 1.5.2
          env:
            TZ: America/Vancouver
            TITLE: "G4V Services"
            LOGO: "https://halkeye.sfo2.digitaloceanspaces.com/auth/logo_i_guess.png"
          probes:
            liveness: &probes
              enabled: true
              custom: true
              spec:
                httpGet:
                  path: /
                  port: 4173
                initialDelaySeconds: 0
                periodSeconds: 10
                timeoutSeconds: 1
                failureThreshold: 3
            readiness: *probes
            startup:
              enabled: false
          resources:
            requests:
              memory: 128Mi
              cpu: 10m
  service:
    main:
      controller: main
      ports:
        http:
          port: 4173
  ingress:
    main:
      enabled: true
      annotations:
        gethomepage.dev/enabled: "false"
        traefik.ingress.kubernetes.io/router.entrypoints: 'websecure'
        traefik.ingress.kubernetes.io/router.middlewares: 'traefik-ingress-authentik@kubernetescrd'
        nginx.ingress.kubernetes.io/auth-url: http://ak-outpost-nginx.authentik.svc.cluster.local:9000/outpost.goauthentik.io/auth/nginx
        nginx.ingress.kubernetes.io/auth-signin: https://auth.g4v.dev/outpost.goauthentik.io/start?rd=$scheme://$http_host$escaped_request_uri
        nginx.ingress.kubernetes.io/auth-response-headers: Set-Cookie,X-authentik-username,X-authentik-groups,X-authentik-email,X-authentik-name,X-authentik-uid
        nginx.ingress.kubernetes.io/auth-snippet: |
          proxy_set_header X-Forwarded-Host $http_host;
      hosts:
        - host: starbase80.g4v.dev
          paths:
            - path: /
              service:
                identifier: main
                port: http
  persistence:
    config:
      enabled: true
      type: configMap
      name: '{{ .Release.Name }}-config'
      globalMounts:
        - path: /app/src/config/config.json
          subPath: config.json
          readOnly: true
    tmp:
      type: emptyDir

  configMaps:
    config:
      data:
        # add tautulli
        # add unifi
        config.json: "{{ .Values.starBaseConfig | toJson }}"

  starBaseConfig:
    - category: Services
      services:
      - description: Authentication
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/authentik.png
        name: Authentik
        uri: https://auth.g4v.dev
      - description: Project Tracking
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/planka.png
        name: Planka
        uri: https://planka.g4v.dev
      - description: Todo / Task list manager
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/vikunja.png
        name: Vikunja
        uri: https://vikunja.g4v.dev
      - description: Privacy Focused Search Engine
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/searxng.png
        name: Searxng
        uri: https://search.g4v.dev
      - description: VPN Management
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/wireguard.png
        name: VPN
        uri: https://admin-vpn.g4v.dev
    - category: Media
      services:
      - description: eBook library
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/calibre-web.png
        name: Calibre
        uri: https://books.g4v.dev
      - description: Podcasts and Audio Books
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/audiobookshelf.png
        name: Audio Book Shelf
        uri: https://audiobookshelf.g4v.dev
      - description: Comics
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/komga.png
        name: Komga
        uri: https://komga.g4v.dev
      - description: RSS Reader
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/miniflux.png
        name: Miniflux
        uri: https://miniflux.g4v.dev
      - description: (formerly Logitech Media Server) Music Player
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/openmediavault.png
        name: Lyrion Music Server
        uri: https://lms.g4v.dev
    - category: Communication
      services:
      - description: Matrix chat client
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/element.png
        name: Element
        uri: https://chat.g4v.dev
    - category: Photos
      services:
      - description: Photo hosting
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/immich.png
        name: Immich
        uri: https://immich.g4v.dev
    - category: Monitoring
      services:
      - icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/grafana.png
        name: Grafana (DO)
        uri: https://grafana.h.g4v.dev
      - icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/alertmanager.png
        name: AlertManager (DO)
        uri: https://grafana.do.g4v.dev
      - icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/prometheus.png
        name: Prometheus (DO)
        uri: https://prometheus.do.g4v.dev
      - icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/grafana.png
        name: Grafana (Home)
        uri: https://grafana.h.g4v.dev
      - icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/alertmanager.png
        name: AlertManager (Home)
        uri: https://grafana.do.g4v.dev
      - icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/prometheus.png
        name: Prometheus (Home)
        uri: https://prometheus.do.g4v.dev
    - category: Devices
      services:
      - description: Home automation
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/home-assistant.png
        name: Home Assistant
        uri: http://home.g4v.dev
      - description: Network storage
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/synology.png
        name: Synology
        uri: http://synology.dhcp.home:5000
      - description: Cameras
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/frigate.png
        name: Frigate
        uri: https://frigate.g4v.dev
      - description: Network Monitoring
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/netalertx.png
        name: NetAlertX
        uri: https://netalertx.g4v.dev
    - category: Other
      services:
      - description: Status Pages
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/uptime-kuma.png
        name: Status Pages (Home)
        uri: https://status-h.g4v.dev
      - description: Status Pages
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/uptime-kuma.png
        name: Status Pages (DO)
        uri: https://status-do.g4v.dev
      - description: Browser Debug Info
        name: Whoami (Home)
        uri: https://whoami-h.g4v.dev
      - description: Browser Debug Info
        name: Whoami (DO)
        uri: https://whoami-h.g4v.dev
    - category: Media Fetchers
      services:
      - description: Discover new media
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/overseerr.png
        name: Overseerr
        uri: https://overseerr.g4v.dev
      - description: Movies
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/radarr.png
        name: Radarr
        uri: https://radarr.g4v.dev
      - description: Anime Movies
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/radarr.png
        name: Anime Radarr
        uri: https://anime-radarr.g4v.dev
      - description: TV
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/sonarr.png
        name: Sonarr
        uri: https://sonarr.g4v.dev
      - description: Anime
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/sonarr.png
        name: Anime Sonarr
        uri: https://anime-sonarr.g4v.dev
      - description: Music
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/lidarr.png
        name: Lidarr
        uri: https://lidarr.g4v.dev
      - description: Books (doesnt really work)
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/readarr.png
        name: Readarr
        uri: https://readarr.g4v.dev
      - description: Comics
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/mylar3.png
        name: Mylar3
        uri: https://mylar3.g4v.dev
      - description: Books, Audio, and Comics
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/lazylibrarian.png
        name: Lazy Librarian
        uri: https://lazylibrarian.g4v.dev
      - description: Subtitles
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/subtitles.png
        name: Bazarr
        uri: https://bazarr.g4v.dev
    - category: Links
      services:
      - description: Personal Dashboard
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/homarr.png
        name: Homarr
        uri: https://homarr.g4v.dev
      - description: Personal Dashboard
        name: Starbase-80
        uri: https://starbase80.g4v.dev
      - description: Link Shortener
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/kutt.png
        name: Kutt
        uri: https://kutt.g4v.dev
      - description: Link Shortener
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/yourls.png
        name: YourLS
        uri: https://yourls.g4v.dev
    - category: Downloaders
      services:
      - description: Download Torrents
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/qbittorrent.png
        name: QBittorrent
        uri: https://qbittorrent.nas.g4v.dev
      - description: Download Usenet
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/sabnzbd.png
        name: sabnzbd
        uri: https://sabnzbd.nas.g4v.dev/
      - description: Download Youtube
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/youtubedl.png
        name: youtubedl
        uri: https://youtubedl.g4v.dev/
      - description: Download Kobo Content
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/kobodl.png
        name: kobodl
        uri: https://kobodl.g4v.dev/
    - category: Kubernetes
      services:
      - description: ''
        icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/argocd.png
        name: ArgoCD
        uri: https://argocd.h.g4v.dev
      - name: KubeTail (Home)
        uri: https://kubetail-h.g4v.dev
      - name: KubeTail (DO)
        uri: https://kubetail-do.g4v.dev

