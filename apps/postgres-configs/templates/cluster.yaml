apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: acid-minimal-cluster
spec:
  teamId: "acid"
  volume:
    size: 1Gi
    storageClass: synology-csi-retain
  numberOfInstances: 2
  users:
    halkeye:  # database owner
    - superuser
    - createdb
    prowlarr.prowlarr_owner: []
    sonarr.sonarr_owner: []
  databases:
    prowlarr_main: prowlarr.prowlarr_owner
    prowlarr_log: prowlarr.prowlarr_owner
    sonarr_main: sonarr.sonarr_owner
    sonarr_log: sonarr.sonarr_owner
  preparedDatabases:
    prowlarr_main:
      defaultUsers: true
      secretNamespace: prowlarr
      schemas:
        public:
          defaultRoles: false
    prowlarr_log:
      defaultUsers: true
      secretNamespace: prowlarr
      schemas:
        public:
          defaultRoles: false
    sonarr_main:
      defaultUsers: true
      secretNamespace: sonarr
      schemas:
        public:
          defaultRoles: false
    sonarr_log:
      defaultUsers: true
      secretNamespace: sonarr
      schemas:
        public:
          defaultRoles: false
  postgresql:
    version: "15"
