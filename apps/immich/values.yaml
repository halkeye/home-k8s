immich:
  postgresql:
    enabled: false
  redis:
    enabled: true
  common:
    secrets:
      secret:
        enabled: true
        stringData:
          DB_DATABASE_NAME: "immich"
    controllers:
      microservices:
        containers:
          main:
            env:
              DB_HOSTNAME:
                valueFrom:
                  secretKeyRef:
                    name: "acid-minimal-cluster.postgres"
                    key: DB_HOSTNAME
              DB_USERNAME:
                valueFrom:
                  secretKeyRef:
                    name: immich.immich-owner.acid-minimal-cluster.credentials.postgresql.acid.zalan.do
                    key: username
              DB_PASSWORD:
                valueFrom:
                  secretKeyRef:
                    name: immich.immich-owner.acid-minimal-cluster.credentials.postgresql.acid.zalan.do
                    key: password
      server:
        containers:
          main:
            env:
              DB_HOSTNAME:
                valueFrom:
                  secretKeyRef:
                    name: "acid-minimal-cluster.postgres"
                    key: DB_HOSTNAME
              DB_USERNAME:
                valueFrom:
                  secretKeyRef:
                    name: immich.immich-owner.acid-minimal-cluster.credentials.postgresql.acid.zalan.do
                    key: username
              DB_PASSWORD:
                valueFrom:
                  secretKeyRef:
                    name: immich.immich-owner.acid-minimal-cluster.credentials.postgresql.acid.zalan.do
                    key: password
        ingress:
          main:
            enabled: true
            annotations:
              cert-manager.io/cluster-issuer: acme-letsencrypt-prod
              hajimari.io/icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/master/png/immich.png
              hajimari.io/appName: Immich
              gethomepage.dev/enabled: "true"
              gethomepage.dev/description: Photos
              gethomepage.dev/icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/master/png/immich.png
              gethomepage.dev/name: Immich
            hosts:
              - host: &host "immich.g4v.dev"
                paths:
                  - path: /
            tls:
              - secretName: immich-tls-certificate
                hosts:
                  - *host
      machine-learning:
        containers:
          main:
            env:
              DB_HOSTNAME:
                valueFrom:
                  secretKeyRef:
                    name: "acid-minimal-cluster.postgres"
                    key: DB_HOSTNAME
              DB_USERNAME:
                valueFrom:
                  secretKeyRef:
                    name: immich.immich-owner.acid-minimal-cluster.credentials.postgresql.acid.zalan.do
                    key: username
              DB_PASSWORD:
                valueFrom:
                  secretKeyRef:
                    name: immich.immich-owner.acid-minimal-cluster.credentials.postgresql.acid.zalan.do
                    key: password
  persistence:
    library:
      type: nfs
      server: 172.16.10.10
      path: /volume1/Apps/immich
